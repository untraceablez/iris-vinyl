<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
	"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
    <head>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
	<title>Iris Vinyl</title>
	<style type="text/css">
	body {
		margin: 0;
		padding: 0;
	 -webkit-user-select: none;
		font-family: 'Helvetica Neue';
		color: #fdfdfd;
		text-shadow: 0px 1px 3px black;
		text-align: center;
		font-weight: bold;
		font-size: 33pt;
		overflow: hidden;
		text-decoration: inherit;
/*		background: #666;*/
	}

	link {
	    color: white;
	    text-decoration: none;

	}

	a {
		cursor: default;
		text-decoration: inherit;
	}

	#container {
		position: absolute;
		top: 115px;
		left: 0px;
		width: 1024px;
		height: 1024px;
		text-decoration: inherit;
	}

	#controller {
		opacity: 45;
		text-decoration: inherit;
	}

	#artBox {
		width: 608px;
		height: 608px;
		position: absolute;
		top: 0px;
		left: 0px;
		text-decoration: inherit;
/*		border: 1px solid red;*/
	}
	#art {
		position: absolute;
/*		background: #f90;*/
		left: 0px;
		top: 0px;
		height: 608px;
		width: 608px;
		text-decoration: inherit;
	}
	#jewel {
		position: absolute;
		top: 0px;
		left: 0px;
		width: 608px;
		height: 608px;
		text-decoration: inherit;
	}

	#album, #album2 {
		padding-top: 8px;
		text-shadow: 0px 1px 3px black;
		color: #fdfdfd;
		top: 10px;
		white-space:nowrap;
		overflow:hidden;
		text-overflow: ellipsis;
		font-family: "Helvetica Neue";
		font-weight: light;
		font-size: 14pt;
		text-align: center;
		text-decoration: inherit;

	}

	#artist, #artist2 {
	padding-top: 8px;
	text-shadow: 0px 1px 3px black;
	color: #fdfdfd;
	top: 10px;
		white-space:nowrap;
		overflow:hidden;
		text-overflow: ellipsis;
		font-family: "Helvetica Neue";
		font-weight: bold;
		font-size: 14pt;
		text-align: center;
		text-decoration: inherit;
	}

	#albumArtist {
	padding-top: 8px;
	text-shadow: 0px 1px 3px black;
	color: #fdfdfd;
		white-space:nowrap;
		overflow:hidden;
		text-overflow: ellipsis;
		text-align: center;
		text-decoration: inherit;
	}

	#title, #title2 {
	padding-top: 8px;
	text-shadow: 0px 1px 3px black;
	color: #fdfdfd;
	top: 10px;
		white-space:nowrap;
		overflow:hidden;
		text-overflow: ellipsis;
		font-family: "Helvetica Neue";
		font-weight: bold;
		font-size: 18pt;
		text-align: center;
		text-decoration: inherit;
	}

.bubbleInfo {
    padding-top: 8px;
    text-shadow: 0px 1px 3px black;
    color: #fdfdfd;
    position: relative;
	top: 0px;
	left: 0px;
	right: 0px;
	bottom:0px;
	text-decoration: inherit;
}

#popupInfos {
    padding-top: 8px;
    text-shadow: 0px 1px 3px black;
    color: #fdfdfd;
    top: 41px;
    left: 0px;
    position: relative;
    background: transparent url(popup.png);
	width: 575px;
	height: 300px;
/*	display: none; */
/*	opacity: 0; */
/*	border: 1px solid red; */
}

#popupControls {
    padding-top: 8px;
    text-shadow: 0px 1px 3px black;
    color: #fdfdfd;
    position: absolute;
	top: 41px;
	left: 43px;
	right: 0px;
	text-align: center;
	background: transparent url(popup.png) top left no-repeat;
	width: 575px;
	height: 300px;
/*	display: none;*/
	opacity: 0;
	font-size: 10pt;
	padding: 14px 10px;
	text-decoration: inherit;
/*	border: 1px solid red;*/
}

#rating Helvetica Neue
	#rating a {
		padding-top: 8px;
		margin-top: 8px;
		font-size: 24pt;
		color: #fdfdfd;
		text-shadow: 0px 1px 3px black;
		text-align: center;

    }

    a:link {padding-top: 8px; text-shadow: 0px 1px 3px black; text-decoration: none; color: #fdfdfd;}
    a:hover {padding-top: 8px; text-shadow: 0px 1px 3px black; text-decoration: none; color: #fdfdfd}
    a:click {padding-top: 8px; text-shadow: 0px 1px 3px black; text-decoration: none; color: #fdfdfd}

	#controls {
		text-shadow: 0px 1px 3px black;
		padding-top: 8px;
		margin-top: 8px;
		color: #fdfdfd;
		font-family: Webdings;
		text-decoration: inherit;
	}
		#controls a {
			padding-top: 8px;
			margin-top: 8px;
			color: #fdfdfd;
			text-decoration: inherit;
			font-size: 32px;
			text-shadow: 0px 1px 3px black;
			text-align: center;
			text-decoration: inherit;
		}

#textOverlay {
	padding-top: 8px;
	position: absolute;
	top: 0px;
	left: 0px;
	width: 0px;
	z-index: 999;
	color: #fdfdfd;
	text-shadow: 0px 1px 3px black;
/*	letter-spacing: 1px;*/
	line-height: 0px;
	text-transform: uppercase;
	-webkit-transform: rotate(270deg);
	transform: rotate(270deg);
/*	border: 1px solid red;*/
	text-align: center;
	text-decoration: inherit;
}

#album2 {
	padding-top: 8px;
	text-shadow: 0px 1px 3px black;
	color: #fdfdfd;
	white-space:nowrap;
	overflow:hidden;
	text-overflow: ellipsis;
	font-family: "Helvetica Neue";
	font-weight: light;
	font-size: 10pt;
	text-align: center;
	text-decoration: inherit;
}

#artist2 {
	padding-top: 8px;
	text-shadow: 0px 1px 3px black;
	color: #fdfdfd;
	white-space:nowrap;
	overflow:hidden;
	text-overflow: ellipsis;
	font-family: "Helvetica Neue";
	font-weight: bold;
	font-size: 16pt;
	text-align: center;
	text-decoration: inherit;
}

	</style>
	<script src="animator.js" type="text/javascript"></script>
	<script type="text/javascript">
	oldPlayState = 0;
	function $(id) { return document.getElementById(id); }
	function trackUpdate(track)
	{
		var title = track.title;
		var artist = track.artist;
		var album = track.album;

		title = (typeof(title) != 'undefined') ? title : "";
		artist = (typeof(artist) != 'undefined') ? artist : "";
		album = (typeof(album) != 'undefined') ? album : "";

		updateRatingUI(Player.rating());

		// hide the controller if nothing is playing
		if (title != "") {
			//containerVisibility.seekTo(1);
			// if controller is visible, display the tooltip
			if($('popupControls').style.opacity == 100) {
				infosPopup.seekTo(1);
				setTimeout("infosPopup.seekTo(0);", 3000);
			}
			$('title').innerHTML = title;
			$('title2').innerHTML = title;
			$('artist').innerHTML = artist;
			$('artist2').innerHTML = artist;
			$('album').innerHTML = album;
			$('album2').innerHTML = album;
		} else {
			// else, hide the controller
			//containerVisibility.seekTo(0);
			$('title').innerHTML = "Nothing is playing";
			$('title2').innerHTML = "Nothing is playing";
			$('artist').innerHTML = artist;
			$('artist2').innerHTML = "Nothing";
			$('album').innerHTML = album;
			$('album2').innerHTML = "is playing";
		}
	}
	function artworkUpdate(artURL)
	{
		if (artURL == "")
		{
			$('art').src = "noartwork.png";
			$('textOverlay').style.display = '';
		}
		else
		{
			$('art').src = artURL;
			$('artBox').src = 'case.png';
			$('textOverlay').style.display = 'none';
		}
	}

	function playStateChanged(pState)
	{
		if (pState != oldPlayState)
		{
			if (pState == 0 || pState == 2)
				$('playLink').innerHTML = '';
			else
				$('playLink').innerHTML = '';

			oldPlayState = pState;
		}
	}

	function playPause()
	{
		Player.playPause();
		playerUpdate();
	}

	function setRating(rating)
	{
		updateRatingUI(rating);
		Player.setRating(rating);
	}

	function updateRatingUI(rating)
	{
		if(rating > 0){
			$('star1').innerHTML = "★";
		} else {
			$('star1').innerHTML = "☆";
		}

		if(rating > 20){
			$('star2').innerHTML = "★";
		} else {
			$('star2').innerHTML = "☆";
		}

		if(rating > 40){
			$('star3').innerHTML = "★";
		} else {
			$('star3').innerHTML = "☆";
		}

		if(rating > 60){
			$('star4').innerHTML = "★";
		} else {
			$('star4').innerHTML = "☆";
		}

		if(rating > 80){
			$('star5').innerHTML = "★";
		} else {
			$('star5').innerHTML = "☆";
		}
	}

	function init() {
		controlPopup = new Animator({
			transition: Animator.makeEaseOut(2),
			duration: 500});
		controlPopup.addSubject(new NumericalStyleSubject(
			$("popupControls"), 'top', 40, 50));
		controlPopup.addSubject(new NumericalStyleSubject(
			$("popupControls"), 'opacity', 0, 1));
		controlPopup.addSubject(new NumericalStyleSubject(
			$("popupControls"), 'display', 'none', 'block'));

		infosPopup = new Animator({
			transition: Animator.makeEaseOut(2),
			duration: 500});
		infosPopup.addSubject(new NumericalStyleSubject(
			$("popupInfos"), 'top', 40, 50));
		infosPopup.addSubject(new NumericalStyleSubject(
			$("popupInfos"), 'opacity', 0, 1));
		infosPopup.addSubject(new NumericalStyleSubject(
			$("popupInfos"), 'display', 'none', 'block'));

		/*containerVisibility = new Animator({
			transition: Animator.makeEaseOut(2),
			duration: 500});
		containerVisibility.addSubject(new NumericalStyleSubject(
			$("controler"), 'opacity', 0.2, 1));*/
	}

	var timerRunning = false; // boolean flag
	var myTimer = null;

	function startTimer() {
	    myTimer = setTimeout('controlPopup.seekTo(0);', 3000); // myTimer holds the id of the timer
	    // timerRunning = true; // whenever you start a timer set the timerRunning flag to true
	}

	function stopTimer() {
		clearTimeout(myTimer);
//	    if (timerRunning) {
//	        clearTimeout(myTimer);
//		}
//		timerRunning = false;
	}
	</script>
</head>
<body onLoad="init();">
	<div id="controler">
		<div ondblclick="controlPopup.seekTo(0); infosPopup.seekTo(0);" onclick="controlPopup.seekTo(1); infosPopup.seekTo(0); stopTimer(); startTimer();" id="container">
			<div id="artBox" class="bubbleInfo">
				<img src="" id="art" alt="artwork" />
				<img src="case.png" id="jewel" alt="Jewel" />
			</div>
			<div id="textOverlay">
				<div id="artist2"> </div>
				<div id="album2"> </div>
			</div>
		</div>
		<div id="popupInfos">
			<div id="title"> </div>
			<div id="artist"></div>
			<div id="album"></div>
		</div>
		<div id="popupControls">
			<div id="title2"> </div>
			<!-- ><div id="albumArtist"><span id="artist2"></span> - <span id="album2"></span></div> -->
			<div id="rating">
				<span id="controls">
					<a href="#" onClick="Player.previousTrack(); stopTimer(); startTimer();return false;"></a><a href="#" onClick="playPause(); stopTimer(); startTimer();return false;" id="playLink"></a><a href="#" onClick="Player.nextTrack(); stopTimer(); startTimer(); return false;"></a>
				</span>
				<a id="star1" href="#" onClick="setRating(20);stopTimer(); startTimer();return false;">☆</a>
				<a id="star2" href="#" onClick="setRating(40);stopTimer(); startTimer();return false;">☆</a>
				<a id="star3" href="#" onClick="setRating(60);stopTimer(); startTimer();return false;">☆</a>
				<a id="star4" href="#" onClick="setRating(80);stopTimer(); startTimer();return false;">☆</a>
				<a id="star5" href="#" onClick="setRating(100);stopTimer(); startTimer();return false;">☆</a>
			</div>
		</div>
	</div>
</body>
</html>